/* =========================
   NavBar.module.css (FULL)
   ========================= */

/* ===== Desktop ===== */
.nav{
  position: sticky;
  top: 0;
  z-index: 1000;
  background: #111;
  color: var(--nav-fg, #fff);
  font: inherit;
  letter-spacing: inherit;
}
.row{
  height: var(--nav-h, 64px);
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding: 0 16px;
}
.logo{
  display: inline-grid;
  place-items: center;
  width: 40px;
  height: 40px;
  color: var(--nav-fg, #fff);
  text-decoration: none;
}
.linksDesktop{
  display: flex;
  align-items: center;
  gap: 14px;
  flex-wrap: wrap;
  justify-content: flex-end;
}
.navLink{
  color: currentColor;
  text-decoration: none;
  font: inherit;
  letter-spacing: inherit;
  padding: 10px 14px;
  border-radius: 8px;
}
.navLink:hover{ background:#222; }
.active{ background:#fff; color:#111; }

.menuBtn{ display: none; }
.navSpacer{ display: none; }

/* --- ВАЖНО: по умолчанию (десктоп) портал мобильного меню скрыт --- */
.overlay,
.sheet,
.item{
  display: none !important;
}

/* ===== Mobile (<=880px) ===== */
@media (max-width: 880px){
  .nav{
    position: fixed;
    inset: 0 0 auto 0;
    z-index: 10001;
    height: var(--nav-h, 60px);
    background: #111;
    color: var(--nav-fg, #fff);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    box-shadow: 0 6px 20px rgba(0,0,0,0.18);
  }
  .row{
    height: var(--nav-h, 60px);
    padding: 0 max(12px, env(safe-area-inset-left)) 0 max(12px, env(safe-area-inset-right));
  }

  /* десктопные ссылки скрываем */
  .linksDesktop{ display: none; }

  /* бургер — всегда виден и светлый */
  .menuBtn{
    display: inline-grid;
    place-items: center;
    width: 44px;
    height: 44px;
    border: 0;
    background: transparent;
    border-radius: 10px;
    cursor: pointer;
  }
  .menuBtn span{
    display: block;
    width: 22px;
    height: 2px;
    background: var(--nav-fg, #fff);
    border-radius: 2px;
    position: relative;
    transition: transform .25s ease, opacity .25s ease, top .25s ease, bottom .25s ease;
  }
  .menuBtn span:nth-child(1){ top:-6px; }
  .menuBtn span:nth-child(2){ top: 0; }
  .menuBtn span:nth-child(3){ bottom:-6px; }
  .menuOpen span:nth-child(1){ transform: translateY(6px) rotate(45deg); }
  .menuOpen span:nth-child(2){ opacity: 0; }
  .menuOpen span:nth-child(3){ transform: translateY(-6px) rotate(-45deg); }

  /* Половинное меню (через портал) — уже видно на мобиле */
  .overlay{
    display: block !important;
    position: fixed;
    top: var(--nav-h, 60px);
    left: 0;
    right: 0;
    height: 50vh;
    z-index: 10000;
    background: #111;
    color: var(--nav-fg, #fff);
    font: inherit;
    letter-spacing: inherit;
    border-bottom-left-radius: 16px;
    border-bottom-right-radius: 16px;
    opacity: 0;
    visibility: hidden;
    pointer-events: none;
    transition: opacity .25s ease, visibility .25s ease;
  }
  .overlayOpen{
    opacity: 1;
    visibility: visible;
    pointer-events: auto;
  }

  .sheet{
    display: grid !important;
    height: 100%;
    align-content: start;
    justify-items: center;
    gap: 8px;
    padding: 10px 12px 12px;
    overflow: hidden;
    font: inherit;
    letter-spacing: inherit;
  }

  .item{
    display: block !important;
    min-width: min(86vw, 360px);
    text-align: center;
    color: currentColor;
    text-decoration: none;
    font: inherit;
    letter-spacing: inherit;
    padding: 12px 14px;
    border-radius: 12px;
    background: rgba(255,255,255,0.06);
    box-shadow: inset 0 0 0 1px rgba(255,255,255,0.09);
    transition: transform .18s ease, background .18s ease;
  }
  .item:active{ transform: scale(.98); }
  .itemActive{
    background:#fff;
    color:#111 !important;
    box-shadow: 0 6px 18px rgba(255,255,255,.18);
  }

  .navSpacer{
    display: block;
    height: var(--nav-h, 60px);
  }
}

/* очень узкие / низкие экраны — ещё компактнее, чтобы всё влезло в 50vh */
@media (max-width: 880px) and (max-height: 740px){
  .sheet{ padding: 8px 10px 10px; gap: 6px; }
  .item{ padding: 10px 12px; }
}
@media (max-width: 880px) and (max-height: 640px){
  .sheet{ padding: 6px 10px 8px; gap: 6px; }
  .item{ padding: 9px 10px; }
}

/* доступность */
@media (prefers-reduced-motion: reduce){
  .menuBtn span,
  .overlay{ transition: none !important; }
}
